# 动态链接库

起因：遇到这个bug：
在执行到这一句的时候
>self.full_proj_transform = (self.world_view_transform.unsqueeze(0).bmm(self.projection_matrix.unsqueeze(0))).squeeze(0)

报错为：这个模型的代码是官方提供的，排除了cuda版本和代码本身的tensor的size问题，最后锁定在动态库链接上

> RuntimeError CUDA error: CUBLAS_STATUS_NOT_SUPPORTED when calling `cublasSgemmStridedBatched( handle, opa, opb, m, n, k, &alpha, a, lda, stridea, b, ldb, strideb, &beta, c, ldc, stridec, num_batches)`


解决：
使用指令清除掉环境变量LD_LIBRARY_PATH之后，就可与正常运行了。
```
unset LD_LIBRARY_PATH
```

原理如下：

<img src="/asset/environment/Error10-lib.png" alt="Error09" style="zoom:25%;" />

如图，在.bashrc中写了这个环境变量，先从自己装的cuda和conda里找，所以加入了很多我自己的。清除之后，就是从系统默认的位置去找，在/usr/lib目录下，这里面存放的是操作系统默认的动态链接库。然后出现了万恶的版本冲突问题，于是就报奇怪的错误。